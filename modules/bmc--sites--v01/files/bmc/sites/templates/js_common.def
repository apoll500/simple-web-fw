
//MODULE::

DEF JAVASCRIPT
{
}

DEF JS_MAIN_TEXT
{
    //
    DEF FRAME_BREAKER
    {
        ->
        //(0)--------------------
        //   breaking frames
        //-----------------------
        if(self.parent.frames.length!=0){self.parent.location='index.php';}
        <--
    }
    DEF THE_SITE
    {
        ->
        //(1)--------------------
        //   The site
        //-----------------------
        var site=@the_siteid;
        //settings
        var css_substyle="@css_substyle";
        var copyright_info="@copyright_info";
        <--
    }
    DEF BASE_URL
    {
        ->
        //(2)--------------------
        //   base-url
        //-----------------------
        var baseurl=this.location.protocol+"//"+this.location.host
        if(this.location.host.substr(0,4)=="www.")baseurl=baseurl+"@server_baseurl_sec";
        else baseurl=baseurl+"@server_baseurl";
        if(this.location.host=="localhost")baseurl=this.location.protocol+"//"+this.location.host+"@local_baseurl";
        <--
    }
    DEF GLOBALS
    {
        ->
        //(3)--------------------
        //   Global elements
        //-----------------------
        var domel={};
        var e_mbox=null;
        <--
    }
    DEF OTHER_GLOBALS
    {
        ->
        //(4)--------------------
        //   Other global vars
        //-----------------------
        var main_handler;
        <--
    }
    DEF STATUS_BAR
    {
        ->
        //(5)--------------------
        //   Status-bar
        //-----------------------
        var global_loadstat=new loadstat(document.getElementById("MAIN"));
        <--
    }
    DEF LOADER
    {
        ->
        //(6)--------------------
        //   Loader
        //-----------------------
        var main_loader=new script_loader(loader_start,loader_anim,@max_loadcount);
        <--
    }
    DEF BASE_SYSTEM
    {
        ->
        //(7)--------------------
        //   Base-System
        //-----------------------
        main_loader.load("page.js");
        main_loader.load("js/mods/main.js");
        <--
    }
    DEF MODULES_MINIMUM
    {
        ->
        //(8)--------------------
        //   Modules
        //-----------------------
        main_loader.load("js/mods/mod_user.js");
        <--
    }
    DEF MODULES
    {
        ->
        //(8)--------------------
        //   Modules
        //-----------------------
        main_loader.load("js/mods/mod_user.js");
        //main_loader.load("js/mods/mod_docs.js");
        //main_loader.load("js/mods/mod_timelog.js");
        main_loader.load("js/mods/mod_commentsUser.js");
        main_loader.load("js/mods/mod_blog.js");
        <--
    }
    DEF ELEMENTS
    {
        ->
        //(9)--------------------
        //   Elements
        //-----------------------
        main_loader.load("layouts/elem/setup.js");
        main_loader.load("js/elements/sysmod_box/sysmod_box.js");
        main_loader.load("js/elements/sysmod_box/sysmod_box.css");
        <--
    }
    DEF JSMAIN
    {
        ->
        //(10)--------------------
        //   MAIN
        //-----------------------
        function loader_start()
        {
            if(typeof loader_start_extra == 'function')loader_start_extra();
            main_handler=new Handler("main");
            console.log("start()");
            global_loadstat.destroy();
            //load_page(currentpage);
            setgstyle(gstyle);
            startup=false;
            setTimeout(startup_check,10000);
        }
        <--
    }
    DEF LOADING_ANIM
    {
        ->
        //(11)--------------------
        //   anim. while loading
        //-----------------------
        function loader_anim(p)
        {
            global_loadstat.onEvent("update",p);
        }
        <--
    }
    DEF SHOP_SYSTEM
    {
        ->
        //(12)--------------------
        //   JS-WEBSHOP
        //-----------------------
        main_loader.load("js/shop/shop.js");
        main_loader.load("js/shop/shop.css");
        <--
    }
}

DEF JS_PAGE_TEXT
{
    DEF UPDATE
    {
        ->
        function update()
        {
            __update();
        }
        <--
    }
    DEF U_LOAD_PAGE
    {
        ->
        function u_load_page(page)
        {
            __u_load_page(page);
        }
        <--
    }
    DEF U_CHSTYLE
    {
        ->
        function u_chstyle(old_style,new_style)
        {
            __u_chstyle(old_style,new_style);
        }
        <--
    }
    DEF U_SETLANG
    {
        ->
        function u_setlang(newLang)
        {
            __u_setlang(newLang);
        }
        <--
    }
    DEF LOADER_READY
    {
        ->
        main_loader.ready();
        <--
    }
}